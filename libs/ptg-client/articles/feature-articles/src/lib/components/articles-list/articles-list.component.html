<p-table
  [value]="state.entities() || []"
  [paginator]="true"
  [rows]="ROWS_PER_PAGE"
  [tableStyle]="{ 'min-width': '50rem' }"
>
  <ng-template #header>
    <tr>
      <th>ID</th>
      <th>Źródło</th>
      <th>Tytuł</th>
      <th>Branża</th>
      <th>Data</th>
      <th>Relevancy</th>
      <th>Sentyment</th>
      <th class="w-10">Akcje</th>
    </tr>
  </ng-template>
  <ng-template #body let-element>
    <tr>
      <td>{{ element.id }}</td>
      <td>{{ element.provider }}</td>
      <td>{{ element.title }}</td>
      <td>
        <div class="flex flex-wrap gap-2">
          @for (sector of element.sectors; track sector) {
            <p-tag severity="secondary" [value]="sector | sector" />
          }
        </div>
      </td>
      <td>{{ element.publicationDate | date: 'dd.MM.yyyy' }}</td>
      <td>{{ element.isRelevant ? 'Tak' : 'Nie' }}</td>
      <td>
        <span [class]="sentimentColors[element.sentiment]">{{
          element.sentiment | sentiment
        }}</span>
      </td>
      <td>
        <p-button
          icon="pi pi-ellipsis-v"
          [text]="true"
          (click)="menu.toggle($event); menuSelectedItem.set(element)"
        />
      </td>
    </tr>
  </ng-template>
</p-table>

<p-menu #menu [model]="items()" [popup]="true" />
